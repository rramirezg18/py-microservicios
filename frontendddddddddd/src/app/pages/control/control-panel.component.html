<!-- ===== HERO SUPERIOR ===== -->
<div class="cp-hero">
  <div class="wrap">
    <div class="crumbs">
      <button class="pill ghost" (click)="goBack()">â† Volver</button>
      <span class="sep">/</span>
      <span class="muted">Panel de control</span>
    </div>

    <h1>Control del Partido</h1>
    <p class="sub">Gestiona el reloj, puntos, faltas y perÃ­odo en vivo.</p>

    <div class="hero-actions">
      <button class="pill" (click)="goScoreboard()">ğŸ¯ Ver Marcador</button>
      <button class="pill" (click)="openPickMatch()">ğŸ® Elegir partido</button>
      <button class="pill warn" (click)="logout()">ğŸ”’ Cerrar sesiÃ³n</button>
      <button *ngIf="isAdmin" class="pill ghost" (click)="registerTeam()">ğŸ“ Registrar equipo</button>
      <button *ngIf="isAdmin" class="pill ghost" (click)="showStandings()">ğŸ† ClasificaciÃ³n</button>
    </div>
  </div>
</div>

<!-- ===== CONTENEDOR PRINCIPAL ===== -->
<div class="cp-container">

  <!-- ===== CABECERA CON EQUIPOS Y RELOJ ===== -->
  <section class="card head-card">
    <div class="head-left">
      <div class="teams-line">
        <span class="team home">{{ homeName }}</span>
        <span class="vs">vs</span>
        <span class="team away">{{ awayName }}</span>
      </div>

      <div class="meta-line">
        <span class="badge" [class.ok]="rt.timerRunning()" [class.err]="!rt.timerRunning()">
          {{ rt.timerRunning() ? 'En juego' : 'En pausa' }}
        </span>
        <span class="dot"></span>
        <span class="muted">Periodo:</span>
        <span class="period">{{ rt.quarter() }}</span>
        <span class="dot"></span>
        <span class="muted">Estado:</span>
        <span class="status">{{ status() }}</span>
      </div>
    </div>

    <div class="head-right">
      <div class="clock">{{ clock() }}</div>
      <div class="clock-sub">{{ rt.timeoutRunning() ? 'Tiempo muerto' : 'Periodo de tiempo' }}</div>
    </div>
  </section>

  <!-- ===== BOTONES PRINCIPALES DE CONTROL ===== -->
  <section class="card actions">
    <button class="btn go" (click)="start()" [disabled]="rt.timerRunning() || readOnly()">Comenzar</button>
    <button class="btn" (click)="resume()" [disabled]="rt.timerRunning() || readOnly()">Reanudar</button>
    <button class="btn stop" (click)="stop()" [disabled]="readOnly()">Detener</button>
    <button class="btn" (click)="timeout(30)" [disabled]="rt.timeoutRunning() || readOnly()">Tiempo muerto (0:30)</button>
    <button class="btn" (click)="timeout(60)" [disabled]="rt.timeoutRunning() || readOnly()">Tiempo de espera (1:00)</button>
    <button class="btn ghost" (click)="reset()" [disabled]="readOnly()">Reiniciar</button>
  </section>

  <!-- ===== POSESIÃ“N Y PERÃODO ===== -->
  <div class="grid-2">
    <section class="card">
      <div class="card-title">PosesiÃ³n</div>
      <div class="pos">
        <button class="btn pos-btn" [class.active]="possession() === 'home'" (click)="posLeft()">â—„ {{ homeName }}</button>
        <button class="btn pos-none" (click)="posNone()">
          {{ possession() === 'none' ? 'Ninguno' : (possession() === 'home' ? homeName : awayName) }}
        </button>
        <button class="btn pos-btn" [class.active]="possession() === 'away'" (click)="posRight()">{{ awayName }} â–º</button>
      </div>
    </section>

    <section class="card">
      <div class="card-title">Periodo</div>
      <div class="period">
        <div class="period-box"><span class="num">{{ rt.quarter() }}</span></div>
        <button class="btn pos" (click)="periodPlus()" [disabled]="readOnly()">Siguiente perÃ­odo</button>
      </div>
    </section>
  </div>

  <!-- ===== EQUIPOS Y PUNTAJES ===== -->
  <div class="grid-2">
    <!-- EQUIPO LOCAL -->
    <section class="card team">
      <div class="name home">{{ homeName }}</div>
      <div class="sub">PUNTAJE</div>

      <div class="score-row">
        <button class="btn neg" (click)="minus1(homeTeamId)" [disabled]="!canScore()">-1</button>
        <div class="score-display">{{ homeScore() }}</div>
        <button class="btn pos" (click)="add(homeTeamId, 1)" [disabled]="!canScore()">+1</button>
      </div>

      <div class="score-actions">
        <button class="btn pos" (click)="add(homeTeamId, 3)" [disabled]="!canScore()">+3</button>
        <button class="btn pos" (click)="add(homeTeamId, 2)" [disabled]="!canScore()">+2</button>
      </div>

      <div class="sub fouls-title">FALTAS</div>
      <div class="fouls-row">
        <button class="btn neg" (click)="foul(homeTeamId, -1)" [disabled]="readOnly()">-1</button>
        <div class="fouls-display">{{ homeFouls() }}</div>
        <button class="btn pos" (click)="foul(homeTeamId, 1)" [disabled]="readOnly()">+1</button>
      </div>
    </section>

    <!-- EQUIPO VISITANTE -->
    <section class="card team">
      <div class="name away">{{ awayName }}</div>
      <div class="sub">PUNTAJE</div>

      <div class="score-row">
        <button class="btn neg" (click)="minus1(awayTeamId)" [disabled]="!canScore()">-1</button>
        <div class="score-display">{{ awayScore() }}</div>
        <button class="btn pos" (click)="add(awayTeamId, 1)" [disabled]="!canScore()">+1</button>
      </div>

      <div class="score-actions">
        <button class="btn pos" (click)="add(awayTeamId, 3)" [disabled]="!canScore()">+3</button>
        <button class="btn pos" (click)="add(awayTeamId, 2)" [disabled]="!canScore()">+2</button>
      </div>

      <div class="sub fouls-title">FALTAS</div>
      <div class="fouls-row">
        <button class="btn neg" (click)="foul(awayTeamId, -1)" [disabled]="readOnly()">-1</button>
        <div class="fouls-display">{{ awayFouls() }}</div>
        <button class="btn pos" (click)="foul(awayTeamId, 1)" [disabled]="readOnly()">+1</button>
      </div>
    </section>
  </div>

  <!-- ===== HERRAMIENTAS Y ADMIN ===== -->
  <section class="card tools">
    <div class="card-title">Herramientas</div>

    <div class="group">
      <span class="title">NavegaciÃ³n</span>
      <button class="pill" (click)="goBack()">â† Volver</button>
      <button class="pill" (click)="goScoreboard()">ğŸ¯ Ver Marcador</button>
      <button class="pill" (click)="openPickMatch()">ğŸ® Elegir partido</button>
    </div>

    <div class="group" *ngIf="isAdmin">
      <span class="title">AdministraciÃ³n</span>
      <button class="pill" (click)="registerTeam()">ğŸ“ Registrar equipo</button>
      <button class="pill" (click)="showStandings()">ğŸ† ClasificaciÃ³n</button>
    </div>
  </section>
</div>

